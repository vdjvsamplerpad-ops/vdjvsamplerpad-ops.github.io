{"version":3,"file":"VolumeMixer-Jyskqlbo.js","sources":["../../../src/components/sampler/VolumeMixer.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Slider } from '@/components/ui/slider';\nimport { Label } from '@/components/ui/label';\nimport {\n  ChevronDown,\n  ChevronUp,\n  Pause,\n  Play,\n  Save,\n  SlidersHorizontal as Equalizer,\n  Square,\n  Trash2,\n  Volume2,\n  Waves,\n  X\n} from 'lucide-react';\nimport { ChannelDeckState, PlayingPadInfo, StopMode } from './types/sampler';\n\ninterface EqSettings {\n  low: number;\n  mid: number;\n  high: number;\n}\n\ninterface VolumeMixerProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  channelStates: ChannelDeckState[];\n  channelCount: number;\n  legacyPlayingPads: PlayingPadInfo[];\n  masterVolume: number;\n  onMasterVolumeChange: (volume: number) => void;\n  onPadVolumeChange: (padId: string, volume: number) => void;\n  onStopPad: (padId: string) => void;\n  onChannelVolumeChange: (channelId: number, volume: number) => void;\n  onStopChannel: (channelId: number) => void;\n  onPlayChannel: (channelId: number) => void;\n  onPauseChannel: (channelId: number) => void;\n  onSeekChannel: (channelId: number, ms: number) => void;\n  onUnloadChannel: (channelId: number) => void;\n  onArmChannelLoad: (channelId: number) => void;\n  onCancelChannelLoad: () => void;\n  armedLoadChannelId: number | null;\n  onSetChannelHotcue: (channelId: number, slotIndex: number, ms: number | null) => void;\n  onTriggerChannelHotcue: (channelId: number, slotIndex: number) => void;\n  onSaveChannelHotcuesToPad: (channelId: number) => void;\n  onSetChannelCollapsed: (channelId: number, collapsed: boolean) => void;\n  stopMode: StopMode;\n  editMode: boolean;\n  eqSettings: EqSettings;\n  onEqChange: (settings: EqSettings) => void;\n  mixerEqCollapsed: boolean;\n  onMixerEqCollapsedChange: (collapsed: boolean) => void;\n  theme: 'light' | 'dark';\n  windowWidth: number;\n}\n\nconst HOTCUE_SLOTS = [0, 1, 2, 3] as const;\n\nconst formatMs = (ms: number) => {\n  const total = Math.max(0, Math.floor(ms / 1000));\n  const minutes = Math.floor(total / 60).toString().padStart(2, '0');\n  const seconds = (total % 60).toString().padStart(2, '0');\n  return `${minutes}:${seconds}`;\n};\n\nconst clamp = (value: number, min: number, max: number) => Math.max(min, Math.min(max, value));\n\nconst createFallbackState = (channelId: number): ChannelDeckState => ({\n  channelId,\n  loadedPadRef: null,\n  isPlaying: false,\n  isPaused: false,\n  playheadMs: 0,\n  durationMs: 0,\n  channelVolume: 1,\n  hotcuesMs: [null, null, null, null],\n  hasLocalHotcueOverride: false,\n  collapsed: false,\n  waveformKey: null,\n  pad: null\n});\n\nexport function VolumeMixer({\n  open,\n  onOpenChange,\n  channelStates,\n  channelCount,\n  legacyPlayingPads,\n  masterVolume,\n  onMasterVolumeChange,\n  onPadVolumeChange,\n  onStopPad,\n  onChannelVolumeChange,\n  onStopChannel,\n  onPlayChannel,\n  onPauseChannel,\n  onSeekChannel,\n  onUnloadChannel,\n  onArmChannelLoad,\n  onCancelChannelLoad,\n  armedLoadChannelId,\n  onSetChannelHotcue,\n  onTriggerChannelHotcue,\n  onSaveChannelHotcuesToPad,\n  onSetChannelCollapsed,\n  stopMode,\n  editMode,\n  eqSettings,\n  onEqChange,\n  mixerEqCollapsed,\n  onMixerEqCollapsedChange,\n  theme,\n  windowWidth\n}: VolumeMixerProps) {\n  const isMobile = windowWidth < 768;\n\n  const channelStateMap = React.useMemo(() => {\n    const map = new Map<number, ChannelDeckState>();\n    channelStates.forEach((channel) => map.set(channel.channelId, channel));\n    return map;\n  }, [channelStates]);\n\n  const visibleChannels = React.useMemo(() => {\n    const items: ChannelDeckState[] = [];\n    for (let i = 1; i <= channelCount; i += 1) {\n      items.push(channelStateMap.get(i) || createFallbackState(i));\n    }\n    return items;\n  }, [channelCount, channelStateMap]);\n\n  const handleWaveformSeek = React.useCallback((event: React.MouseEvent<HTMLDivElement>, channel: ChannelDeckState) => {\n    const duration = Math.max(1, channel.pad?.endMs || channel.durationMs || 0);\n    if (duration <= 1) return;\n    const rect = event.currentTarget.getBoundingClientRect();\n    const x = clamp(event.clientX - rect.left, 0, rect.width);\n    const ratio = rect.width > 0 ? x / rect.width : 0;\n    onSeekChannel(channel.channelId, ratio * duration);\n  }, [onSeekChannel]);\n\n  const handleHotcuePress = React.useCallback((channel: ChannelDeckState, slotIndex: number) => {\n    if (editMode) {\n      const existing = channel.hotcuesMs[slotIndex];\n      if (typeof existing === 'number') {\n        onSetChannelHotcue(channel.channelId, slotIndex, null);\n      } else {\n        onSetChannelHotcue(channel.channelId, slotIndex, Math.max(0, channel.playheadMs || 0));\n      }\n      return;\n    }\n\n    onTriggerChannelHotcue(channel.channelId, slotIndex);\n  }, [editMode, onSetChannelHotcue, onTriggerChannelHotcue]);\n\n  const panelClasses = theme === 'dark'\n    ? 'bg-gray-800 border-gray-700 text-white'\n    : 'bg-white border-gray-200 text-gray-900';\n\n  const sectionClasses = theme === 'dark'\n    ? 'bg-gray-900/70 border-gray-700'\n    : 'bg-gray-50 border-gray-200';\n\n  return (\n    <div className={`fixed inset-y-0 right-0 z-50 w-[28rem] max-w-[95vw] border-l shadow-2xl transition-transform duration-300 ${panelClasses} ${open ? 'translate-x-0' : 'translate-x-full'}`}>\n      <div className={`flex items-center justify-between px-4 py-3 border-b ${theme === 'dark' ? 'border-gray-700' : 'border-gray-200'}`}>\n        <div>\n          <h2 className=\"text-sm font-semibold\">Mixer Engine V2</h2>\n          <p className={`text-[11px] ${theme === 'dark' ? 'text-gray-400' : 'text-gray-500'}`}>\n            {channelCount} loadable channels, stop mode: {stopMode}\n          </p>\n        </div>\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          onClick={() => onOpenChange(false)}\n          className={theme === 'dark'\n            ? 'h-8 w-8 border-red-500/60 bg-red-900/30 text-red-300 hover:bg-red-800/60'\n            : 'h-8 w-8 border-red-300 bg-red-50 text-red-600 hover:bg-red-100'}\n          title=\"Close Mixer\"\n        >\n          <X className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      <div className=\"h-[calc(100vh-64px)] overflow-y-auto p-3 space-y-3\">\n        {editMode && (\n          <div className={`rounded-md border px-3 py-2 text-xs font-semibold tracking-wide ${theme === 'dark' ? 'border-amber-500 bg-amber-600/20 text-amber-200' : 'border-amber-400 bg-amber-50 text-amber-800'}`}>\n            HOTCUE SET MODE ACTIVE\n            <div className={`mt-1 text-[11px] font-normal ${theme === 'dark' ? 'text-amber-100/90' : 'text-amber-700'}`}>\n              Tap hotcue buttons to set/clear cues. Jump is disabled while Edit Mode is active.\n            </div>\n          </div>\n        )}\n\n        <section className={`rounded-lg border p-3 ${sectionClasses}`}>\n          <div className=\"flex items-center justify-between gap-2 mb-2\">\n            <Label className=\"text-xs font-semibold flex items-center gap-2\">\n              <Volume2 className=\"h-4 w-4\" /> Master and EQ\n            </Label>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"h-7 px-2\"\n              onClick={() => onMixerEqCollapsedChange(!mixerEqCollapsed)}\n            >\n              {mixerEqCollapsed ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronUp className=\"h-4 w-4\" />}\n            </Button>\n          </div>\n\n          {!mixerEqCollapsed && (\n            <div className=\"space-y-3\">\n              <div className=\"space-y-1\">\n                <div className=\"text-[11px] text-gray-500 dark:text-gray-400\">Master Volume {Math.round(masterVolume * 100)}%</div>\n                <Slider\n                  value={[masterVolume * 100]}\n                  onValueChange={([value]) => onMasterVolumeChange(value / 100)}\n                  min={0}\n                  max={100}\n                  step={1}\n                />\n              </div>\n              <div className=\"space-y-1\">\n                <div className=\"text-[11px] text-gray-500 dark:text-gray-400\">High {eqSettings.high > 0 ? '+' : ''}{eqSettings.high}dB</div>\n                <Slider\n                  value={[eqSettings.high]}\n                  onValueChange={([value]) => onEqChange({ ...eqSettings, high: value })}\n                  min={-12}\n                  max={12}\n                  step={1}\n                />\n              </div>\n              <div className=\"space-y-1\">\n                <div className=\"text-[11px] text-gray-500 dark:text-gray-400\">Mid {eqSettings.mid > 0 ? '+' : ''}{eqSettings.mid}dB</div>\n                <Slider\n                  value={[eqSettings.mid]}\n                  onValueChange={([value]) => onEqChange({ ...eqSettings, mid: value })}\n                  min={-12}\n                  max={12}\n                  step={1}\n                />\n              </div>\n              <div className=\"space-y-1\">\n                <div className=\"text-[11px] text-gray-500 dark:text-gray-400\">Low {eqSettings.low > 0 ? '+' : ''}{eqSettings.low}dB</div>\n                <Slider\n                  value={[eqSettings.low]}\n                  onValueChange={([value]) => onEqChange({ ...eqSettings, low: value })}\n                  min={-12}\n                  max={12}\n                  step={1}\n                />\n              </div>\n            </div>\n          )}\n        </section>\n\n        <section className={`rounded-lg border p-3 ${sectionClasses}`}>\n          <Label className=\"text-xs font-semibold flex items-center gap-2 mb-2\">\n            <Equalizer className=\"h-4 w-4\" />\n            Channel Decks\n          </Label>\n          <div className=\"space-y-2\">\n            {visibleChannels.map((channel) => {\n              const loaded = Boolean(channel.pad && channel.loadedPadRef);\n              const duration = Math.max(1, channel.pad?.endMs || channel.durationMs || 0);\n              const playhead = clamp(channel.playheadMs || 0, 0, duration);\n              const progressPct = duration > 0 ? (playhead / duration) * 100 : 0;\n              const isLoadArmed = armedLoadChannelId === channel.channelId;\n              const isOtherChannelArmed = armedLoadChannelId !== null && armedLoadChannelId !== channel.channelId;\n\n              return (\n                <div key={channel.channelId} className={`rounded-md border p-2 ${theme === 'dark' ? 'border-gray-700 bg-gray-950/40' : 'border-gray-200 bg-white'}`}>\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <div className={`text-[11px] font-semibold ${theme === 'dark' ? 'text-gray-200' : 'text-gray-700'}`}>CH {channel.channelId}</div>\n                    <div className=\"min-w-0 flex-1 text-xs truncate\">\n                      {channel.pad ? `${channel.pad.padName} (${channel.pad.bankName})` : 'No sampler loaded'}\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"icon\"\n                      className=\"h-7 w-7\"\n                      onClick={() => onSetChannelCollapsed(channel.channelId, !channel.collapsed)}\n                      title={channel.collapsed ? 'Expand channel' : 'Collapse channel'}\n                    >\n                      {channel.collapsed ? <ChevronDown className=\"h-4 w-4\" /> : <ChevronUp className=\"h-4 w-4\" />}\n                    </Button>\n                  </div>\n\n                  <div className=\"mb-2 flex items-center gap-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className={`h-8 px-3 ${isLoadArmed\n                        ? (theme === 'dark'\n                          ? 'border-emerald-400 bg-emerald-900/40 text-emerald-200'\n                          : 'border-emerald-400 bg-emerald-50 text-emerald-700')\n                        : ''}`}\n                      onClick={() => {\n                        if (isLoadArmed) onCancelChannelLoad();\n                        else onArmChannelLoad(channel.channelId);\n                      }}\n                    >\n                      {isLoadArmed ? 'Waiting Pad...' : 'Load'}\n                    </Button>\n                    <div className={`text-[10px] ${theme === 'dark' ? 'text-gray-400' : 'text-gray-500'}`}>\n                      {isLoadArmed\n                        ? `Tap any highlighted pad to load into CH ${channel.channelId}.`\n                        : isOtherChannelArmed\n                          ? `CH ${armedLoadChannelId} is waiting for pad selection.`\n                          : 'Press Load, then tap a pad on the grid.'}\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center gap-1 mb-2\">\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"icon\"\n                      className=\"h-7 w-7\"\n                      onClick={() => (channel.isPlaying ? onPauseChannel(channel.channelId) : onPlayChannel(channel.channelId))}\n                      disabled={!loaded}\n                      title={channel.isPlaying ? 'Pause' : 'Play'}\n                    >\n                      {channel.isPlaying ? <Pause className=\"h-4 w-4\" /> : <Play className=\"h-4 w-4\" />}\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"icon\"\n                      className=\"h-7 w-7\"\n                      onClick={() => onStopChannel(channel.channelId)}\n                      disabled={!loaded}\n                      title=\"Stop\"\n                    >\n                      <Square className=\"h-4 w-4\" />\n                    </Button>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"icon\"\n                      className=\"h-7 w-7\"\n                      onClick={() => onUnloadChannel(channel.channelId)}\n                      disabled={!loaded}\n                      title=\"Unload\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                    <div className=\"min-w-0 flex-1 text-[11px] text-right text-gray-500 dark:text-gray-400\">\n                      {formatMs(playhead)} / {formatMs(duration)}\n                    </div>\n                  </div>\n\n                  <div\n                    className={`relative h-10 rounded border cursor-pointer overflow-hidden mb-2 ${theme === 'dark' ? 'border-gray-700 bg-gray-900' : 'border-gray-300 bg-gray-100'}`}\n                    onClick={(event) => handleWaveformSeek(event, channel)}\n                    title={loaded ? 'Seek using waveform' : 'Load a sampler first'}\n                  >\n                    <div className={`absolute inset-0 ${theme === 'dark' ? 'bg-gradient-to-r from-blue-900/40 to-cyan-700/40' : 'bg-gradient-to-r from-blue-200 to-cyan-100'}`} />\n                    <div\n                      className={`absolute inset-y-0 left-0 ${theme === 'dark' ? 'bg-cyan-300/30' : 'bg-cyan-400/30'}`}\n                      style={{ width: `${progressPct}%` }}\n                    />\n                    <div\n                      className={`absolute inset-y-0 w-[2px] ${theme === 'dark' ? 'bg-cyan-300' : 'bg-cyan-600'}`}\n                      style={{ left: `${progressPct}%` }}\n                    />\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    {!channel.collapsed && (\n                      <>\n                        <div className=\"grid grid-cols-4 gap-1\">\n                          {HOTCUE_SLOTS.map((slotIndex) => {\n                            const cue = channel.hotcuesMs[slotIndex];\n                            const hasCue = typeof cue === 'number';\n                            return (\n                              <Button\n                                key={`${channel.channelId}-hotcue-${slotIndex}`}\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                className={`h-8 px-0 text-[11px] ${editMode\n                                  ? hasCue\n                                    ? 'border-amber-500 bg-amber-500/30 text-amber-100'\n                                    : 'border-amber-400/70 text-amber-300'\n                                  : hasCue\n                                    ? 'border-cyan-400/80 text-cyan-400'\n                                    : ''}`}\n                                onClick={() => handleHotcuePress(channel, slotIndex)}\n                                disabled={!loaded}\n                                title={editMode\n                                  ? (hasCue ? 'Tap to clear cue' : 'Tap to set cue at current playhead')\n                                  : (hasCue ? `Jump to ${formatMs(cue || 0)}` : 'No cue set')}\n                              >\n                                {hasCue ? `C${slotIndex + 1}` : `-`}\n                              </Button>\n                            );\n                          })}\n                        </div>\n\n                        <div className=\"text-[10px] text-gray-500 dark:text-gray-400\">\n                          {editMode ? 'Tap to SET/CLEAR cue.' : 'Tap to JUMP to cue.'}\n                        </div>\n\n                        {editMode && loaded && channel.hasLocalHotcueOverride && (\n                          <Button\n                            type=\"button\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            className=\"h-8 w-full text-[11px]\"\n                            onClick={() => onSaveChannelHotcuesToPad(channel.channelId)}\n                          >\n                            <Save className=\"mr-1 h-3.5 w-3.5\" /> Save Channel Cues to Pad\n                          </Button>\n                        )}\n                      </>\n                    )}\n\n                    <div className=\"space-y-1\">\n                      <div className=\"flex justify-between text-[10px] text-gray-500 dark:text-gray-400\">\n                        <span>Channel Volume</span>\n                        <span>{Math.round(channel.channelVolume * 100)}%</span>\n                      </div>\n                      <Slider\n                        value={[channel.channelVolume * 100]}\n                        min={0}\n                        max={100}\n                        step={1}\n                        onValueChange={([value]) => onChannelVolumeChange(channel.channelId, value / 100)}\n                      />\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        </section>\n\n        <section className={`rounded-lg border p-3 ${sectionClasses}`}>\n          <Label className=\"text-xs font-semibold flex items-center gap-2 mb-2\">\n            <Waves className=\"h-4 w-4\" /> Current Playing Sampler\n          </Label>\n          <div className=\"space-y-2 max-h-56 overflow-y-auto\">\n            {legacyPlayingPads.length === 0 && (\n              <div className=\"text-xs text-gray-500 dark:text-gray-400\">No pad-grid playback running.</div>\n            )}\n            {legacyPlayingPads.map((pad) => {\n              const duration = Math.max(1, pad.endMs || 0);\n              const progress = clamp(pad.currentMs || 0, 0, duration);\n              return (\n                <div key={pad.padId} className={`rounded-md border p-2 ${theme === 'dark' ? 'border-gray-700 bg-gray-950/40' : 'border-gray-200 bg-white'}`}>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"min-w-0 flex-1\">\n                      <div className=\"text-xs font-medium truncate\">{pad.padName}</div>\n                      <div className=\"text-[10px] text-gray-500 dark:text-gray-400 truncate\">{pad.bankName}</div>\n                    </div>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"icon\"\n                      className=\"h-7 w-7\"\n                      onClick={() => onStopPad(pad.padId)}\n                      title=\"Stop pad\"\n                    >\n                      <Square className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                  {!isMobile && (\n                    <div className=\"mt-2 space-y-1\">\n                      <div className=\"flex justify-between text-[10px] text-gray-500 dark:text-gray-400\">\n                        <span>{formatMs(progress)} / {formatMs(duration)}</span>\n                        <span>{Math.round((pad.effectiveVolume ?? pad.volume) * 100)}%</span>\n                      </div>\n                      <Slider\n                        value={[pad.volume * 100]}\n                        min={0}\n                        max={100}\n                        step={1}\n                        onValueChange={([value]) => onPadVolumeChange(pad.padId, value / 100)}\n                      />\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </section>\n      </div>\n    </div>\n  );\n}\r\n"],"names":["HOTCUE_SLOTS","formatMs","ms","total","Math","max","floor","toString","padStart","clamp","value","min","createFallbackState","channelId","loadedPadRef","isPlaying","isPaused","playheadMs","durationMs","channelVolume","hotcuesMs","hasLocalHotcueOverride","collapsed","waveformKey","pad","VolumeMixer","open","onOpenChange","channelStates","channelCount","legacyPlayingPads","masterVolume","onMasterVolumeChange","onPadVolumeChange","onStopPad","onChannelVolumeChange","onStopChannel","onPlayChannel","onPauseChannel","onSeekChannel","onUnloadChannel","onArmChannelLoad","onCancelChannelLoad","armedLoadChannelId","onSetChannelHotcue","onTriggerChannelHotcue","onSaveChannelHotcuesToPad","onSetChannelCollapsed","stopMode","editMode","eqSettings","onEqChange","mixerEqCollapsed","onMixerEqCollapsedChange","theme","windowWidth","isMobile","channelStateMap","React.useMemo","map","Map","forEach","channel","set","visibleChannels","items","i","push","get","handleWaveformSeek","React.useCallback","event","duration","_a","endMs","rect","currentTarget","getBoundingClientRect","x","clientX","left","width","ratio","handleHotcuePress","slotIndex","existing","panelClasses","sectionClasses","jsxRuntimeExports","jsxs","className","children","jsx","Button","variant","size","onClick","title","X","Label","Volume2","type","ChevronDown","ChevronUp","round","Slider","onValueChange","step","high","mid","low","Equalizer","loaded","Boolean","playhead","progressPct","isLoadArmed","isOtherChannelArmed","padName","bankName","disabled","Pause","Play","Square","Trash2","style","Fragment","cue","hasCue","Save","Waves","length","progress","currentMs","padId","effectiveVolume","volume"],"mappings":"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"}